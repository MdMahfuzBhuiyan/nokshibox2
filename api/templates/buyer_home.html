{% extends 'base.html' %}

{% block title %}Buyer Home - NokshiBox{% endblock %}

{% block nav_items %}
<li class="nav-item"><a class="nav-link" href="{% url 'buyer_home' %}">Home</a></li>
<li class="nav-item"><a class="nav-link" href="#">Products</a></li>
<li class="nav-item"><a class="nav-link" href="#">About Us</a></li>
<li class="nav-item"><a class="nav-link" href="#">Contact Us</a></li>
{% endblock %}

{% block content %}
<div class="row">
    <div class="col-md-3">
        <h5>Categories</h5>
        <ul class="list-group" id="category-list">
            <li class="list-group-item active" data-category="all">All</li>
            {% for category in categories %}
                <li class="list-group-item" data-category="{{ category.id }}">{{ category.name }}</li>
            {% endfor %}
        </ul>
    </div>
    <div class="col-md-9">
        <div class="row" id="product-grid">
            {% for product in products %}
            <div class="col-md-4 mb-3 product-card" data-category="{{ product.category.id }}">
                <div class="card h-100">
                    <img src="{{ product.image.url }}" class="card-img-top" alt="{{ product.title }}">
                    <div class="card-body">
                        <h5 class="card-title">{{ product.title }}</h5>
                        <p class="card-text">${{ product.price }}</p>
                        <a href="{% url 'product_detail' product.id %}" class="btn btn-primary">View Details</a>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
</div>

<script>
document.querySelectorAll('#category-list li').forEach(item => {
    item.addEventListener('click', function() {
        document.querySelectorAll('#category-list li').forEach(li => li.classList.remove('active'));
        this.classList.add('active');
        let selected = this.dataset.category;
        document.querySelectorAll('.product-card').forEach(card => {
            card.style.display = (selected === 'all' || card.dataset.category === selected) ? 'block' : 'none';
        });
    });
});
</script>
{% endblock %}
